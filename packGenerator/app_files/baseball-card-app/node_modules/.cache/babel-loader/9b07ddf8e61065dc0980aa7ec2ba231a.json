{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\natha\\\\baseball-card-app\\\\app_files\\\\baseball-card-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\natha\\\\baseball-card-app\\\\app_files\\\\baseball-card-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\natha\\\\baseball-card-app\\\\app_files\\\\baseball-card-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\natha\\\\baseball-card-app\\\\app_files\\\\baseball-card-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import Image from'./Image';import'./CollectionPage.css';import Larrow from'@material-ui/icons/ArrowLeft';import Rarrow from'@material-ui/icons/ArrowRight';import LLarrow from'@material-ui/icons/ArrowBackIos';import RRarrow from'@material-ui/icons/ArrowForwardIos';import BackDrop from'../Backdrop/Backdrop';import ReactCardFlip from'react-card-flip';import CancelIcon from'@material-ui/icons/Cancel';import StarBorderIcon from'@material-ui/icons/StarBorder';var CollectionPage=/*#__PURE__*/function(_Component){_inherits(CollectionPage,_Component);var _super=_createSuper(CollectionPage);function CollectionPage(props){var _this;_classCallCheck(this,CollectionPage);_this=_super.call(this,props);_this.createImage=function(image){return/*#__PURE__*/React.createElement(Image,{source:process.env.PUBLIC_URL+'/CardImages/Fronts/'+image[0],key:image[2],name:image[1],display:_this.display,pic:image[0],id:image[2]});};_this.createImages=function(collection){return collection.map(_this.createImage);};_this.display=function(source,cardtext,pic,index){if(_this.state.isMounted){_this.setState({display:true});_this.setState({displayimg:source});_this.setState({name:cardtext});_this.setState({picture:pic});_this.setState({id:index});_this.setState({removed:false});}};_this.handleLastPage=function(){if(_this.state.currentpage<_this.state.pages){_this.setState({currentpage:_this.state.pages});_this.updateCards(_this.state.pages);}};_this.handleNextPage=function(){if(_this.state.currentpage<_this.state.pages){_this.setState({currentpage:_this.state.currentpage+1});_this.updateCards(_this.state.currentpage+1);}};_this.handleFirstPage=function(){if(_this.state.currentpage>1){_this.setState({currentpage:1});_this.updateCards(1);}};_this.handlePreviousPage=function(){if(_this.state.currentpage>1){_this.setState({currentpage:_this.state.currentpage-1});_this.updateCards(_this.state.currentpage-1);}};_this.backdropClickHandler=function(){_this.setState({display:false});_this.setState({flipped:false});_this.setState({removed:false});};_this.handleCardClick=function(){_this.setState({flipped:!_this.state.flipped});};_this.handleRemove=function(){var removeapiUrl='http://www.packgenerator.com:5000/api/removecard/?username='+_this.props.username+'&password='+_this.props.password+'&index='+_this.state.id;_this.setState({removed:true});fetch(removeapiUrl).then(function(response){return response.json();}).then(function(data){_this.updateCardtotal();_this.updatePagetotal();_this.updateCards(_this.state.currentpage);});};_this.updateCards=function(page){var cardapiUrl='http://www.packgenerator.com:5000/api/getpage/?username='+_this.props.username+'&page='+page;fetch(cardapiUrl).then(function(response){return response.json();}).then(function(data){_this.setState({collection:data.collection});});};_this.updateCardtotal=function(){var cardsapiUrl='http://www.packgenerator.com:5000/api/gettotalcards/?username='+_this.props.username;fetch(cardsapiUrl).then(function(response){return response.json();}).then(function(data){_this.setState({totalcards:data.total});});};_this.updatePagetotal=function(){var pageapiUrl='http://www.packgenerator.com:5000/api/pages/?username='+_this.props.username;fetch(pageapiUrl).then(function(response){return response.json();}).then(function(data){_this.setState({pages:data.pages});});};_this.state={collection:[[\"placeholder.png\",\"This is a placeholder\",0]],currentpage:1,pages:1,totalcards:0,display:false,displayimg:null,name:null,isMounted:false,flipped:false,picture:null,id:null,removed:false};return _this;}_createClass(CollectionPage,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var pageapiUrl='http://www.packgenerator.com:5000/api/pages/?username='+this.props.username;fetch(pageapiUrl).then(function(response){return response.json();}).then(function(data){_this2.setState({pages:data.pages});});var cardsapiUrl='http://www.packgenerator.com:5000/api/gettotalcards/?username='+this.props.username;fetch(cardsapiUrl).then(function(response){return response.json();}).then(function(data){_this2.setState({totalcards:data.total});});this.updateCards(1);this.setState({isMounted:true});}},{key:\"render\",value:function render(){var removebutton;var displaycard;var favbutton;if(this.props.myuser===this.props.username){if(this.state.removed){removebutton=/*#__PURE__*/React.createElement(\"button\",null,\"Removed\");}else{removebutton=/*#__PURE__*/React.createElement(\"button\",{onClick:this.handleRemove},/*#__PURE__*/React.createElement(CancelIcon,null),\"   Remove from collection\");}favbutton=/*#__PURE__*/React.createElement(\"button\",null,/*#__PURE__*/React.createElement(StarBorderIcon,null),\"   Make favorite\");}if(this.state.display){displaycard=/*#__PURE__*/React.createElement(\"div\",{className:\"display_box\"},/*#__PURE__*/React.createElement(\"div\",{className:\"display_\"},/*#__PURE__*/React.createElement(\"div\",{className:\"bd\",onClick:this.backdropClickHandler},/*#__PURE__*/React.createElement(BackDrop,null)),/*#__PURE__*/React.createElement(\"div\",{className:\"goldborder\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card_lattice\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card_box\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card_flip\"},/*#__PURE__*/React.createElement(ReactCardFlip,{isFlipped:this.state.flipped,flipDirection:\"vertical\",className:\"card_flip_obj\"},/*#__PURE__*/React.createElement(\"img\",{onClick:this.handleCardClick,src:this.state.displayimg,className:\"card_img\",alt:\"front\"}),/*#__PURE__*/React.createElement(\"img\",{onClick:this.handleCardClick,src:process.env.PUBLIC_URL+'/CardImages/Backs/'+this.state.picture,className:\"card_img\",alt:\"back\"}))),/*#__PURE__*/React.createElement(\"p\",null,this.state.name)))),/*#__PURE__*/React.createElement(\"div\",{className:\"buttondiv\"},/*#__PURE__*/React.createElement(\"div\",{className:\"b1c\"},favbutton)),/*#__PURE__*/React.createElement(\"div\",{className:\"buttondiv\"},/*#__PURE__*/React.createElement(\"div\",{className:\"b2c\"},removebutton))));}return/*#__PURE__*/React.createElement(\"div\",{className:\"collection_background\"},displaycard,/*#__PURE__*/React.createElement(\"div\",{className:\"header\"},/*#__PURE__*/React.createElement(\"h6\",null,this.props.username,\"'s Collection\")),/*#__PURE__*/React.createElement(\"div\",{className:\"total\"},/*#__PURE__*/React.createElement(\"p\",null,\"Total cards: \",this.state.totalcards)),/*#__PURE__*/React.createElement(\"div\",{className:\"nav_style\"},/*#__PURE__*/React.createElement(LLarrow,{className:\"outerleft\",onClick:this.handleFirstPage}),/*#__PURE__*/React.createElement(Larrow,{className:\"inner\",fontSize:\"large\",onClick:this.handlePreviousPage}),/*#__PURE__*/React.createElement(\"span\",null,this.state.currentpage),/*#__PURE__*/React.createElement(Rarrow,{className:\"inner\",fontSize:\"large\",onClick:this.handleNextPage}),/*#__PURE__*/React.createElement(RRarrow,{className:\"outer\",onClick:this.handleLastPage})),/*#__PURE__*/React.createElement(\"div\",{className:\"imageblock\"},this.createImages(this.state.collection)),/*#__PURE__*/React.createElement(\"div\",{className:\"nav_style_bottom\"},/*#__PURE__*/React.createElement(LLarrow,{className:\"outerleft\",onClick:this.handleFirstPage}),/*#__PURE__*/React.createElement(Larrow,{className:\"inner\",fontSize:\"large\",onClick:this.handlePreviousPage}),/*#__PURE__*/React.createElement(\"span\",null,this.state.currentpage),/*#__PURE__*/React.createElement(Rarrow,{className:\"inner\",fontSize:\"large\",onClick:this.handleNextPage}),/*#__PURE__*/React.createElement(RRarrow,{className:\"outer\",onClick:this.handleLastPage})));}}]);return CollectionPage;}(Component);;export default CollectionPage;","map":{"version":3,"sources":["C:/Users/natha/baseball-card-app/app_files/baseball-card-app/src/components/CollectionPage/CollectionPage.js"],"names":["React","Component","Image","Larrow","Rarrow","LLarrow","RRarrow","BackDrop","ReactCardFlip","CancelIcon","StarBorderIcon","CollectionPage","props","createImage","image","process","env","PUBLIC_URL","display","createImages","collection","map","source","cardtext","pic","index","state","isMounted","setState","displayimg","name","picture","id","removed","handleLastPage","currentpage","pages","updateCards","handleNextPage","handleFirstPage","handlePreviousPage","backdropClickHandler","flipped","handleCardClick","handleRemove","removeapiUrl","username","password","fetch","then","response","json","data","updateCardtotal","updatePagetotal","page","cardapiUrl","cardsapiUrl","totalcards","total","pageapiUrl","removebutton","displaycard","favbutton","myuser"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport Image from './Image';\r\nimport './CollectionPage.css';\r\nimport Larrow from '@material-ui/icons/ArrowLeft';\r\nimport Rarrow from '@material-ui/icons/ArrowRight';\r\nimport LLarrow from '@material-ui/icons/ArrowBackIos';\r\nimport RRarrow from '@material-ui/icons/ArrowForwardIos';\r\nimport BackDrop from '../Backdrop/Backdrop';\r\nimport ReactCardFlip from 'react-card-flip';\r\nimport CancelIcon from '@material-ui/icons/Cancel';\r\nimport StarBorderIcon from '@material-ui/icons/StarBorder';\r\n\r\nclass CollectionPage extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            collection: [[\"placeholder.png\", \"This is a placeholder\", 0]],\r\n            currentpage: 1,\r\n            pages: 1,\r\n            totalcards: 0,\r\n            display: false,\r\n            displayimg: null,\r\n            name: null,\r\n            isMounted: false,\r\n            flipped: false,\r\n            picture: null,\r\n            id: null,\r\n            removed: false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const pageapiUrl = 'http://www.packgenerator.com:5000/api/pages/?username=' + this.props.username\r\n\r\n        fetch(pageapiUrl).then((response) => response.json()).then((data) => {\r\n            this.setState({ pages: data.pages });\r\n        })\r\n        const cardsapiUrl = 'http://www.packgenerator.com:5000/api/gettotalcards/?username=' + this.props.username\r\n        fetch(cardsapiUrl).then((response) => response.json()).then((data) => {\r\n            this.setState({ totalcards: data.total });\r\n        })\r\n        this.updateCards(1)\r\n        this.setState({ isMounted: true })\r\n    }\r\n\r\n    createImage = (image) => {\r\n        return <Image source={process.env.PUBLIC_URL + '/CardImages/Fronts/' + image[0]} key={image[2]} name={image[1]} display={this.display} pic={image[0]} id={image[2]} />;\r\n    }\r\n\r\n    createImages = (collection) => {\r\n        return collection.map(this.createImage);\r\n    }\r\n    display = (source, cardtext, pic, index) => {\r\n        if (this.state.isMounted) {\r\n            this.setState({ display: true })\r\n            this.setState({ displayimg: source })\r\n            this.setState({ name: cardtext })\r\n            this.setState({ picture: pic })\r\n            this.setState({ id: index })\r\n            this.setState({ removed: false })\r\n        }\r\n    }\r\n    handleLastPage = () => {\r\n        if (this.state.currentpage < this.state.pages) {\r\n            this.setState({ currentpage: this.state.pages })\r\n            this.updateCards(this.state.pages)\r\n        }\r\n    }\r\n    handleNextPage = () => {\r\n        if (this.state.currentpage < this.state.pages) {\r\n            this.setState({ currentpage: this.state.currentpage + 1 })\r\n            this.updateCards(this.state.currentpage + 1)\r\n        }\r\n    }\r\n    handleFirstPage = () => {\r\n        if (this.state.currentpage > 1) {\r\n            this.setState({ currentpage: 1 })\r\n            this.updateCards(1)\r\n        }\r\n    }\r\n    handlePreviousPage = () => {\r\n        if (this.state.currentpage > 1) {\r\n            this.setState({ currentpage: this.state.currentpage - 1 })\r\n            this.updateCards(this.state.currentpage - 1)\r\n        }\r\n    }\r\n    backdropClickHandler = () => {\r\n        this.setState({ display: false })\r\n        this.setState({ flipped: false })\r\n        this.setState({ removed: false })\r\n    }\r\n    handleCardClick = () => {\r\n        this.setState({ flipped: !this.state.flipped })\r\n    }\r\n    handleRemove = () => {\r\n        const removeapiUrl = 'http://www.packgenerator.com:5000/api/removecard/?username=' + this.props.username + '&password=' + this.props.password + '&index=' + this.state.id\r\n        this.setState({removed: true})\r\n        fetch(removeapiUrl).then((response) => response.json()).then((data) => {\r\n            this.updateCardtotal();\r\n            this.updatePagetotal();\r\n            this.updateCards(this.state.currentpage);\r\n        })\r\n    }\r\n    updateCards = (page) => {\r\n        const cardapiUrl = 'http://www.packgenerator.com:5000/api/getpage/?username=' + this.props.username + '&page=' + page\r\n        fetch(cardapiUrl).then((response) => response.json()).then((data) => {\r\n            this.setState({ collection: data.collection })\r\n        })\r\n    }\r\n    updateCardtotal = () => {\r\n        const cardsapiUrl = 'http://www.packgenerator.com:5000/api/gettotalcards/?username=' + this.props.username\r\n        fetch(cardsapiUrl).then((response) => response.json()).then((data) => {\r\n            this.setState({ totalcards: data.total });\r\n        })\r\n    }\r\n    updatePagetotal = () => {\r\n        const pageapiUrl = 'http://www.packgenerator.com:5000/api/pages/?username=' + this.props.username\r\n        fetch(pageapiUrl).then((response) => response.json()).then((data) => {\r\n            this.setState({ pages: data.pages });\r\n        })\r\n    }\r\n    render() {\r\n        let removebutton;\r\n        let displaycard;\r\n        let favbutton;\r\n        if (this.props.myuser === this.props.username) {\r\n            if (this.state.removed) {\r\n                removebutton = <button>Removed</button>\r\n            }\r\n            else {\r\n                removebutton = <button onClick={this.handleRemove}><CancelIcon />   Remove from collection</button>\r\n            }\r\n            favbutton = <button><StarBorderIcon />   Make favorite</button>\r\n        }\r\n        if (this.state.display) {\r\n            displaycard =\r\n                <div className=\"display_box\" >\r\n                    <div className=\"display_\">\r\n                        <div className=\"bd\" onClick={this.backdropClickHandler}><BackDrop /></div>\r\n                        <div className=\"goldborder\">\r\n                            <div className=\"card_lattice\">\r\n                                <div className=\"card_box\">\r\n                                    <div className=\"card_flip\">\r\n                                        <ReactCardFlip isFlipped={this.state.flipped} flipDirection=\"vertical\" className=\"card_flip_obj\">\r\n                                            <img onClick={this.handleCardClick} src={this.state.displayimg} className=\"card_img\" alt=\"front\" />\r\n                                            <img onClick={this.handleCardClick} src={process.env.PUBLIC_URL + '/CardImages/Backs/' + this.state.picture} className=\"card_img\" alt=\"back\" />\r\n                                        </ReactCardFlip>\r\n                                    </div>\r\n                                    <p>{this.state.name}</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"buttondiv\">\r\n                            <div className=\"b1c\">{favbutton}</div>\r\n                        </div>\r\n                        <div className=\"buttondiv\">\r\n                            <div className=\"b2c\">{removebutton}</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n        }\r\n        return (\r\n            <div className =\"collection_background\">\r\n                {displaycard}\r\n                <div className=\"header\"><h6>{this.props.username}'s Collection</h6></div>\r\n                <div className=\"total\"><p>Total cards: {this.state.totalcards}</p></div>\r\n                <div className=\"nav_style\">\r\n                    <LLarrow className=\"outerleft\" onClick={this.handleFirstPage} />\r\n                    <Larrow className=\"inner\" fontSize=\"large\" onClick={this.handlePreviousPage} />\r\n                    <span>{this.state.currentpage}</span>\r\n                    <Rarrow className=\"inner\" fontSize=\"large\" onClick={this.handleNextPage} />\r\n                    <RRarrow className=\"outer\" onClick={this.handleLastPage} />\r\n                </div>\r\n                <div className=\"imageblock\">\r\n                    {this.createImages(this.state.collection)}\r\n                </div>\r\n                <div className=\"nav_style_bottom\">\r\n                    <LLarrow className=\"outerleft\" onClick={this.handleFirstPage} />\r\n                    <Larrow className=\"inner\" fontSize=\"large\" onClick={this.handlePreviousPage} />\r\n                    <span>{this.state.currentpage}</span>\r\n                    <Rarrow className=\"inner\" fontSize=\"large\" onClick={this.handleNextPage} />\r\n                    <RRarrow className=\"outer\" onClick={this.handleLastPage} />\r\n                </div>\r\n            </div>\r\n\r\n        );\r\n    }\r\n};\r\n\r\nexport default CollectionPage;"]},"metadata":{},"sourceType":"module"}